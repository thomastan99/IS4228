<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Stock Search</title>
	<style>
		body {
			background-color: #f6f6f6;
			font-family: Arial, sans-serif;
			font-size: 14px;
			line-height: 1.4;
			margin: 0;
			padding: 0;
		}
		h1 {
			color: #0072c6;
			font-size: 36px;
			margin: 30px 0 10px;
			text-align: center;
		}
		form {
			display: flex;
			justify-content: center;
			margin-bottom: 40px;
		}
		label {
			display: inline-block;
			margin-right: 10px;
			text-align: right;
			width: 120px;
		}
		input[type="text"] {
			border: 1px solid #ddd;
			font-size: 16px;
			padding: 10px;
			width: 200px;
		}
		button[type="submit"] {
			background-color: #0072c6;
			border: none;
			border-radius: 4px;
			color: #fff;
			cursor: pointer;
			font-size: 16px;
			padding: 10px 20px;
			margin-left: 10px;
		}
		table {
			background-color: #fff;
			border-collapse: collapse;
			box-shadow: 0px 0px 10px #ddd;
			margin: 0 auto;
			width: 100%;
			max-width: 800px;
		}
		th, td {
			border: 1px solid #ddd;
			padding: 10px;
			text-align: center;
		}
		th {
			background-color: #0072c6;
			color: #fff;
			font-weight: bold;
			position: sticky;
			top: 0;
		}
		tr:nth-child(even) {
			background-color: #f2f2f2;
		}
	</style>
</head>
<body>
	<h1>Stock Search</h1>
	<form method="POST" action="/">
		<label for="stock_symbol">Enter Stock Symbol:</label>
		<input type="text" id="stock_symbol" name="stock_symbol">
		<button type="submit" name="search">Search</button>
	</form>
	
	{% if results %}
		<table>
			<thead>
				<tr>
					<th>Time Searched</th>
					<th>Price</th>
					<th>Stock Symbol</th>
					<th>Beta</th>
					<th>Reddit Sentiment Score</th>
				</tr>
			</thead>
			<tbody>
				{% for result in results %}
					<tr>
						<td>{{ result.time }}</td>
						<td>{{result.price}}</td>
						<td>{{ result.stock_symbol }}</td>
						<td>{{ result.beta }}</td>
						<td>{{ result.sentiment_score }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	{% endif %}

<br>
<br>
<h1>Portfolio Builder</h1>
<form method="POST" action="/">
	<label for="stock_symbol">Enter Stock Symbol:</label>
	<input type="text" id="stock_symbol" name="stock_symbol">
	<label for="stock_symbol">Enter Purchase Price:</label>
	<input type="text" id="purchase_price" name="purchase_price">
	<label for="stock_symbol">Enter Quantity :</label>
	<input type="text" id="Quantity" name="Quantity">
	<button type="submit" name = "Build">Add to Portfolio</button>
</form>
{% if port_results %}
<table>
	<thead>
		<tr>
			
			<th>Stock Symbol</th>
			<th>Price</th>
			<th>Quantity</th>
			<th>Value</th>
			<th>Weight in Portfolio</th>
			<th>Expected Returns</th>
		</tr>
	</thead>
	<tbody>
		{% for result in port_results %}
			<tr>
				<td>{{ result.Symbol }}</td>
				<td>{{result.Price}}</td>
				<td>{{ result.Quantity }}</td>
				<td>{{result.Value}}</td>
				<td>{{result.Weight}}</td>
				<td>{{result.EX}}</td>
			</tr>

		{% endfor %}
	</tbody>
</table>
{% endif %}
<h1>Portfolio Metrics</h1>
{% if portfolio_metrics %}
<table>
	<thead>
		<tr>
			
			<th>Volatility</th>
			<th>Expected Return</th>
			<th>Weighted Portfolio Sentiment</th>
			<th>Total Portfolio Value</th>
			<th>Portfolio Beta</th>
		</tr>
	</thead>
	<tbody>
			<tr>
				<td>{{portfolio_metrics.Vol}}</td>
				<td>{{ portfolio_metrics.PER }}</td>
				<td>{{ portfolio_metrics.Weighted_Sentiment }}</td>
				<td>{{ portfolio_metrics.TotalValue }}</td>
				<td>{{portfolio_metrics.PortfolioBeta}}</td>
			</tr>

	</tbody>
</table>
{% endif %}
</body>
</html>
